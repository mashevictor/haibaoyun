# PowerVerse Chain 测试部署说明

## 📋 前置要求

1. **Python 3.x** - 用于启动HTTP服务器
2. **Node.js** - 用于运行Playwright测试
3. **npm** - Node.js包管理器

## 🚀 快速开始

### 方法一：自动部署和测试（推荐）

双击运行 `部署并测试.bat`，脚本会自动：
1. 启动HTTP服务器（端口8000）
2. 运行所有自动化测试
3. 测试完成后自动停止服务器

### 方法二：手动部署和测试

#### 步骤1：启动服务器

**选项A：使用批处理文件**
- 双击 `启动测试服务器.bat`
- 服务器将在 `http://localhost:8000` 运行
- 保持窗口打开，不要关闭

**选项B：使用Python脚本**
```bash
python start_server_for_test.py
```

**选项C：使用Python内置服务器**
```bash
python -m http.server 8000
```

#### 步骤2：运行测试

在**新的命令行窗口**中运行：

**选项A：使用批处理文件**
- 双击 `运行测试.bat`

**选项B：使用npm命令**
```bash
npm test
```

#### 步骤3：查看测试报告

```bash
npm run test:report
```

或者直接打开：`playwright-report/index.html`

## 📊 测试内容

自动化测试会检查以下内容：

1. **多语言翻译检查**
   - 切换到英文环境
   - 检查页面是否包含中文字符
   - 验证所有文本都已正确翻译

2. **空链接检查**
   - 检查所有 `<a>` 标签的 `href` 属性
   - 报告空链接或 `href="#"` 的链接

3. **语言切换器功能**
   - 验证语言按钮可见性
   - 测试悬停和点击功能
   - 检查菜单显示和z-index

4. **用户操作模拟**
   - 模拟点击导航菜单
   - 模拟页面滚动
   - 测试产品下拉菜单

## 🔍 测试的页面

- 首页 (`index.html`)
- 应用场景 (`pages/scenarios.html`)
- 代币页面 (`pages/token.html`)
- 硬件工厂 (`pages/hardware-factory.html`)
- 研发实力 (`pages/research-strength.html`)
- 开发者中心 (`pages/developer.html`)
- 关于我们 (`pages/about.html`)
- PowerVerse Chain (`pages/chain.html`)
- PowerVerse Infra (`pages/infra.html`)
- PowerVerse Market (`pages/market.html`)
- PowerVerse DAO (`pages/dao.html`)
- DeCloud (`pages/decloud.html`)
- 白皮书 (`pages/whitepaper.html`)
- 产品页面 (`pages/product.html`)
- 宣传册 (`pages/brochure.html`)

## ⚙️ 配置文件

### `playwright.config.js`
- 配置了测试基础URL: `http://localhost:8000`
- 配置了自动重用已存在的服务器
- 配置了HTML报告输出

### `tests/translation-check.spec.js`
- 包含所有测试用例
- 可以自定义测试逻辑

## 🐛 常见问题

### 1. 端口8000已被占用

**解决方案：**
- 关闭占用端口的其他程序
- 或者修改 `playwright.config.js` 中的端口号
- 或者修改 `start_server_for_test.py` 中的 `PORT` 变量

### 2. npm test 失败

**检查：**
- Node.js和npm是否正确安装
- 是否已运行 `npm install` 安装依赖
- 服务器是否正在运行

### 3. 测试发现中文

**解决方案：**
- 检查对应页面的HTML文件，确保所有中文文本都有 `data-i18n` 属性
- 检查 `js/languages.js`，确保对应的翻译键存在
- 验证翻译键的嵌套路径是否正确

### 4. PowerShell执行错误

**解决方案：**
- 直接双击 `.bat` 文件运行
- 或在CMD中运行，而不是PowerShell
- 或使用Python脚本代替批处理文件

## 📝 测试报告

测试完成后，会生成以下文件：

- `playwright-report/index.html` - HTML格式的详细测试报告
- `test-results/` - 测试截图和日志
- `test_analysis_report.json` - JSON格式的分析报告（如果运行了分析脚本）

## 🔧 高级用法

### 只运行特定测试

编辑 `tests/translation-check.spec.js`，使用 `test.only()` 或 `test.skip()`

### 修改测试超时时间

在 `playwright.config.js` 中修改 `timeout` 配置

### 添加新的测试页面

在 `tests/translation-check.spec.js` 的 `pagesToTest` 数组中添加新页面

## 📞 支持

如果遇到问题，请检查：
1. Python和Node.js版本是否正确
2. 所有依赖是否已安装
3. 服务器是否正常运行
4. 浏览器是否支持（需要Chromium）
